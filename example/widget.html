<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="https://js.arcgis.com/4.11/esri/css/main.css">
    <link rel="stylesheet" href="widget.css">
    <title>RealTimeLayerList - 4.x</title>

    <style>
        html,
        body,
            #viewDiv {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: #fff;
            overflow: hidden;
            font-family: sans-serif;
        }
    </style>

    <script>
        var base = location.href.split("/");
            base.pop();
            base = base.join("/");

        window.dojoConfig = {
            packages: [
                {
                    name: "app",
                    location: base + "/app"
                }
            ]
        };
    </script>

    <script src="https://js.arcgis.com/4.11/"></script>

    <script>

        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/VectorTileLayer",
            "app/RealTimeLayerList"
        ],function(
            Map,
            MapView,
            VectorTileLayer,
            RealTimeLayerList
        ) {

            var map = new Map();
            var tileLayer = new VectorTileLayer({
                url:
                    "https://jsapi.maps.arcgis.com/sharing/rest/content/items/75f4dfdff19e445395653121a95a85db/resources/styles/root.json"
                }
            );
            map.add(tileLayer);

            var mapView = new MapView({
                container: "viewDiv",
                map: map,
                center: [ -3, 40 ],
                zoom: 5
            });


            var widget = new RealTimeLayerList({
                url: "https://551500ab.ngrok.io/arcgis/rest/services/twitter/StreamServer",
                mapView: mapView
                // container: <string>,
                // title: <string|html>,
                // template: <string|function>,
                // definitionExpression: <string>,
                // maxFeatures: <number>,
                // onclick: {
                //     pan: <true|false>,
                //     zoom: <true|false>,
                //     ...
                // }
            });

            mapView.ui.add(widget, {
                position: "top-right"
            });
        }
        );
    </script>
</head>

<body>

    <div id="viewDiv"></div>
</body>
</html>
